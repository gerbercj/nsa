<!DOCTYPE html>
<html>
<head>
  <title>Not Safe Anymore</title>
</head>


<body>
  <script src="lib/d3.min.js"></script>
  <script src="http://d3js.org/queue.v1.min.js"></script>
  <!--script src="http://d3js.org/topojson.v1.min.js"></script-->
  <script type="text/javascript" src="lib/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="lib/colorbrewer.js"></script>
  <script type="text/javascript" src="js/controller.js"></script> 
  <script type="text/javascript" src="js/waf.js"></script> 
  <script type="text/javascript" src="js/countryCodeUtil.js"></script> 
  <script type="text/javascript" src="js/uiUtil.js"></script> 
  <script type="text/javascript" src="js/polarPlot.js"></script>

  <style type="text/css">
    body {
      color: white;
      background-color: #272822;
    }

    svg{
      /*background: #B2DFEE;*/
    }

    .country{
      fill: none;
      stroke: white;
    }

    .line-axis, .circle-axis {
      fill: none;
      stroke: darkgray;
    }

    .line-ticks, .circle-ticks {
      stroke: lightgray;
    }

    text, body{
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 9pt;
      /*font-weight: bold;*/
    }

    table{
      border: none;
    }

    .mapAttack {
      fill: red;
      opacity: 0.6;
    }

    .mapOverlay {
      fill: none;
      pointer-events: all;
    }

    div.tooltip {   
      position: absolute;           
      padding: 4px;             
      font: 12px sans-serif;
      border: 1px solid white;
      border-radius: 8px;           
      pointer-events: none;         
    }
  </style>

  <div>
    <span id="countrySelector">Region&nbsp;</span>
    <span id="networkSelector">Network&nbsp;</span>
  </div>
  <div id="vis"></div>

  <script type="text/javascript">
    var width = 960, height = 1040;

    var bbMap = {
      top: 310,
      left: 10,
      height: 720,
      width: 940
    }

    var bbPolar = {
      top: 10,
      left:10,
      height: 280,
      width: 280
    }

    var svg = d3.select("#vis").append("svg")
      .attr({
        width: width, 
        height: height
      });

    // Polar plot
    var gPolar = svg.append("g")
      .attr({
        transform: "translate(" + bbPolar.left + "," + bbPolar.top + ")"
      });

    // draws the polar plot
    var drawPolar = function() {
      var allHourlyData = waf.getAllDataGroupedHourly();
      allHourlyData = allHourlyData.concat(allHourlyData[0]); // complete the circle
      var filteredHourlyData = waf.getFilteredDataGroupedHourly();
      filteredHourlyData = filteredHourlyData.concat(filteredHourlyData[0]); // complete the circle
      polarPlot.init(gPolar, bbPolar.width, bbPolar.height, d3.range(24), [allHourlyData, filteredHourlyData]);
    }

    // Bubble map
    var gMapWrapper = svg.append("g")
      .attr({
        class: "mapWrapper",
        transform: "translate(" + bbMap.left + "," + bbMap.top + ")"
      });

    // pretty format large numbers
    var numberFormat = d3.format(",.0f");


    /*********************************************************************
                                start here
    **********************************************************************/
    controller.init();
  </script>
</body>
</html>
<!-- REFERENCES
  
-->
