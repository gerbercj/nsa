<!DOCTYPE html>
<html>
<head>
  <title>Not Safe Anymore</title>
</head>


<body>
  <script src="lib/d3.min.js"></script>
  <script src="http://d3js.org/queue.v1.min.js"></script>
  <!--script src="http://d3js.org/topojson.v1.min.js"></script-->
  <script type="text/javascript" src="lib/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="lib/colorbrewer.js"></script>
  <script type="text/javascript" src="js/timeRangeSelector.js"></script>
  <script type="text/javascript" src="js/controller.js"></script>
  <script type="text/javascript" src="js/waf.js"></script>
  <script type="text/javascript" src="js/countryCodeUtil.js"></script>
  <script type="text/javascript" src="js/uiUtil.js"></script>
  <script type="text/javascript" src="js/bubbleMap.js"></script>
  <script type="text/javascript" src="js/polarPlot.js"></script>
  <script type="text/javascript" src="js/iciclePlot.js"></script>

  <style type="text/css">
    body {
      color: white;
      background-color: #272822;
    }

    text, body{
      font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
      font-size: 9pt;
      /*font-weight: bold;*/
    }

    svg {
    }

    .timeRangeWrapper .axis path, .timeRangeWrapper .axis line {
      fill: none;
      stroke: white;
      shape-rendering: crispEdges;
    }

    .timeRangeWrapper .axis text {
      stroke: white;
    }

    .country {
      fill: none;
      stroke: white;
    }

    .polarWrapper .line-axis, .polarWrapper .circle-axis {
      fill: none;
      stroke: darkgray;
    }

    .polarWrapper .line-ticks, .polarWrapper .circle-ticks {
      stroke: lightgray;
    }

    .polarWrapper .line {
      opacity: 0.7;
      stroke-width: 3;
    }

    .icicleWrapper .icicle {
      clip-path: url(#icicleClipPath)
    }

    table{
      border: none;
    }

    .mapWrapper {
      clip-path: url(#bubbleMapClipper);
    }

    .mapAttack {
      fill: white;
      opacity: 0.6;
    }

    .mapOverlay {
      fill: none;
      pointer-events: all;
    }

    div.tooltip {
      position: absolute;
      padding: 4px;
      font: 12px sans-serif;
      border: 1px solid white;
      border-radius: 8px;
      pointer-events: none;
    }
  </style>

  <div id="timeRangeSelector"></div>
  <div>
    <span id="countrySelector">Region&nbsp;</span>
    <span id="networkSelector">Network&nbsp;</span>
    Number of Attacks: <span id="numberOfAttacks">0</span>
  </div>
  <div id="vis"></div>

  <script type="text/javascript">
    var width = 960, height = 1040;

    var bbTimeSelector = {};
    bbTimeSelector.margin = {
      top: 10, 
      right: 10, 
      bottom: 20, 
      left: 60
    };
    bbTimeSelector.height = 100 - bbTimeSelector.margin.top - bbTimeSelector.margin.bottom;
    bbTimeSelector.width = width - bbTimeSelector.margin.left - bbTimeSelector.margin.right;

    var bbMap = {
      top: 310,
      left: 10,
      height: 720,
      width: 940
    }

    var bbPolar = {
      top: 10,
      left: 10,
      height: 280,
      width: 280
    }

    var bbIcicle = {
      top: 10,
      left: 310,
      height: 280,
      width: 400,
      clipPath: 'icicleClipPath'
    }

    var gTimeSelector = d3.select("#timeRangeSelector")
      .append("svg")
        .attr({
          width: bbTimeSelector.width + bbTimeSelector.margin.left + bbTimeSelector.margin.right, 
          height: bbTimeSelector.height + bbTimeSelector.margin.top + bbTimeSelector.margin.bottom
        })
      .append("g")
        .attr({
          class: "timeRangeWrapper",
          transform: "translate(" + bbTimeSelector.margin.left + "," + bbTimeSelector.margin.top  + ")"
        });

    var svg = d3.select("#vis").append("svg")
      .attr({
        width: width,
        height: height
      });

    // Polar plot
    var gPolarWrapper = svg.append("g")
      .attr({
        class: "polarWrapper",
        transform: "translate(" + bbPolar.left + "," + bbPolar.top + ")"
      });

    // Icicle plot
    var gIcicleWrapper = svg.append("g")
      .attr({
        class: "icicleWrapper",
        transform: "translate(" + bbIcicle.left + "," + bbIcicle.top + ")"
      });

    // Bubble map
    var gMapWrapper = svg.append("g")
      .attr({
        class: "mapWrapper",
        transform: "translate(" + bbMap.left + "," + bbMap.top + ")"
      });

    // pretty format large numbers
    var numberFormat = d3.format(",.0f");

    // default transition duration
    var transitionDuration = 750;

    // default colors
    var colorAttack = "red";
    var colorNoAttack = "#909090";


    /*********************************************************************
                                start here
    **********************************************************************/
    controller.init();
  </script>
</body>
</html>
<!-- REFERENCES
  [1] http://mbostock.github.io/d3/tutorial/bar-2.html
  [2] http://stackoverflow.com/questions/642650/how-to-convert-string-into-float-in-javascript
  [3] https://github.com/mbostock/d3/wiki/Transitions#tween
  [4] http://stackoverflow.com/a/13459556/574776
-->
